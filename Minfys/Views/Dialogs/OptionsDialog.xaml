<Window x:Class="Minfys.Views.Dialogs.OptionsDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:windows="clr-namespace:Minfys.ViewModels.Windows"
        xmlns:local="clr-namespace:Minfys.Models"
        xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        mc:Ignorable="d"
        d:DataContext="{d:DesignInstance Type=windows:OptionsDialogViewModel, IsDesignTimeCreatable=True}"
        Title="Settings" Height="450" Width="300"
        WindowStyle="None"
        ResizeMode="NoResize"
        ShowInTaskbar="False"
        WindowStartupLocation="CenterOwner"
        Style="{StaticResource MaterialDesignWindow}">
    <Window.Resources>
        <Style x:Key="SettingBorderStyle" TargetType="Border">
            <Setter Property="Background" Value="#383838"></Setter>
            <Setter Property="Padding" Value="10, 7, 10, 9"></Setter>
            <!--Weird paddings because otherwise text is not exactly in the middle of grid column. It's about text rendering - cant do much-->
            <Setter Property="BorderBrush" Value="#5c5c5c"></Setter>
            <Setter Property="BorderThickness" Value="0,0,0,1"></Setter>
        </Style>
        <Style x:Key="SettingsTextBlockStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"></Setter>
            <Setter Property="VerticalAlignment" Value="Center"></Setter>
        </Style>
        <Style x:Key="LastSettingBorderStyle" TargetType="Border" BasedOn="{StaticResource SettingBorderStyle}">
            <Setter Property="BorderThickness" Value="0"></Setter>
        </Style>
    </Window.Resources>
    <Border
        BorderBrush="#5c5c5c"
        BorderThickness="2">

        <Grid ShowGridLines="False">
            <Grid.RowDefinitions>
                <RowDefinition Height="50"></RowDefinition>
                <RowDefinition Height="50"></RowDefinition>
                <RowDefinition Height="70"></RowDefinition>
                <RowDefinition Height="50"></RowDefinition>
                <RowDefinition></RowDefinition>
            </Grid.RowDefinitions>

            <Border Grid.Row="0" Style="{StaticResource SettingBorderStyle}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="Application mode" Style="{StaticResource SettingsTextBlockStyle}"></TextBlock>
                    <ComboBox Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Right"
                              ItemsSource="{Binding Source={x:Static local:TimerModesOptions.AvailableModes}}"
                              SelectedItem="{Binding TimerMode}">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="SelectionChanged">
                                <b:InvokeCommandAction
                                    Command="{Binding TimerModeOptionChangedCommand}"
                                    CommandParameter="{Binding SelectedItem, RelativeSource={RelativeSource AncestorType=ComboBox}}" />
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </ComboBox>
                </Grid>
            </Border>

            <Border Grid.Row="1" Style="{StaticResource SettingBorderStyle}">
                <Grid ShowGridLines="False">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0"
                               Text="Enable loop" Style="{StaticResource SettingsTextBlockStyle}">
                    </TextBlock>
                    <materialDesign:PackIcon Grid.Column="1" VerticalAlignment="Center"
                                             Kind="InformationOutline"
                                             Width="18" Height="18"
                                             Margin="5"
                                             Foreground="MediumPurple"
                                             Background="Transparent"
                                             ToolTip="Loop cannot be enabled while Single mode is enabled." />
                    <CheckBox Grid.Column="2"
                              VerticalAlignment="Center"
                              HorizontalAlignment="Right"
                              FontSize="15"
                              IsEnabled="{Binding IsLoopOptionAvailable}"
                              IsChecked="{Binding LoopEnabled}"
                              Command="{Binding LoopOptionChangedCommand}" />

                </Grid>
            </Border>

            <Border Grid.Row="2" Style="{StaticResource SettingBorderStyle}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>

                    <TextBlock HorizontalAlignment="Left"
                               Text="Master volume" Style="{StaticResource SettingsTextBlockStyle}">
                    </TextBlock>
                    <Grid Grid.Row="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="5*" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Slider Grid.Column="0"
                                Name="VolumeSlider"
                                VerticalAlignment="Center"
                                Minimum="0"
                                Maximum="100"
                                TickFrequency="1"
                                SmallChange="1"
                                LargeChange="10"
                                Value="{Binding AudioVolumePercent, Mode=TwoWay}">
                        </Slider>
                        <TextBlock Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Right"
                                   Text="{Binding AudioVolumePercent, StringFormat={}{0:F0}%}" />
                    </Grid>
                </Grid>
            </Border>

            <Border Grid.Row="3" Style="{StaticResource SettingBorderStyle}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" Text="Minimize to System Tray on close"
                               Style="{StaticResource SettingsTextBlockStyle}">
                    </TextBlock>
                    <CheckBox Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Right"
                              IsChecked="{Binding TrayEnabled}"
                              Command="{Binding TrayOptionChangedCommand}">
                    </CheckBox>
                </Grid>
            </Border>

            <StackPanel Grid.Row="4"
                        Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                <Button
                    Name="SaveButton" Content="Save"
                    Margin="5"
                    FontSize="15"
                    Command="{Binding SaveSettingsCommand}" />
                <Button Background="#4527A0" BorderBrush="#4527A0" Foreground="#F5F5F5"
                        Name="CloseButton" Content="Close"
                        Margin="5"
                        FontSize="15"
                        Command="{Binding CloseWindowCommand}" />
            </StackPanel>

        </Grid>
    </Border>
</Window>